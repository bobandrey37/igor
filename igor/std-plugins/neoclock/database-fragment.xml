<?xml version="1.0" ?>
<data xmlns:own="http://jackjansen.nl/igor/owner">
	<environment>
		<systemHealth>
			<messages/>
		</systemHealth>
	</environment>
	<devices>
		<{plugin} own:plugin="{plugin}">
			<outerStatus/>
			<innerStatus/>
			<timeout>600</timeout>
			<timeoutStatus>0x600000</timeoutStatus>
		</{plugin}>
	</devices>
	<actions>
		<action own:plugin="{plugin}">
			<xpath>/data/sensors/buienradar</xpath>
			<url>/data/devices/{plugin}/outerStatus</url>
			<mimetype>text/plain</mimetype>
			<method>PUT</method>
			<data>0x206060/{data[1]/level * 0.01 - 0.4}/{data[2]/level * 0.01 - 0.4}/{data[3]/level * 0.01 - 0.4}/{data[4]/level * 0.01 - 0.4}/{data[5]/level * 0.01 - 0.4}/{data[6]/level * 0.01 - 0.4}/{data[7]/level * 0.01 - 0.4}/{data[8]/level * 0.01 - 0.4}/{data[9]/level * 0.01 - 0.4}/{data[10]/level * 0.01 - 0.4}/{data[11]/level * 0.01 - 0.4}/{data[12]/level * 0.01 - 0.4}</data>
			<!-- needs capability for /data/plugindata/{plugin} -->
			<representing>devices/{plugin}</representing>
		</action>
		<action own:plugin="{plugin}">
			<xpath>/data/environment/systemHealth/messages</xpath>
			<interval>60</interval>
			<url>/data/devices/{plugin}/innerStatus</url>
			<mimetype>text/plain</mimetype>
			<method>PUT</method>
			<data>{igor_ifthenelse(string(/data/environment/systemHealth/messages),"0x603000","")}</data>
			<!-- needs capability for /data/plugindata/{plugin} -->
			<representing>devices/{plugin}</representing>
		</action>
		<action own:plugin="{plugin}">
			<xpath>/data/devices/{plugin}/*</xpath>
			<url>/plugin/{plugin}/push</url>
			<representing>devices/{plugin}</representing>
			<aggregate>true</aggregate>
		</action>
	</actions>
	<plugindata>
		<{plugin} own:plugin="{plugin}">
			<host>{plugin}.local</host>
			<protocol>http</protocol>
		</{plugin}>
	</plugindata>
</data>
